---
# required metadata

title: Email ER destination type
description: This topic provides information about how to configure an email destination for each FOLDER or FILE component of an Electronic reporting (ER) format that is configured to generate outbound documents.
author: NickSelin
manager: AnnBe
ms.date: 11/12/2020
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 

# optional metadata

ms.search.form: DocuType, ERSolutionTable, ERFormatDestinationTable
# ROBOTS: 
audience: Application User
# ms.devlang: 
ms.reviewer: kfend
# ms.search.scope: Core, Operations
# ms.tgt_pltfrm: 
ms.custom: 97423
ms.assetid: 
ms.search.region: Global
# ms.search.industry: 
ms.author: nselin
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1

---

# Email ER destination type

[!include [banner](../includes/banner.md)]

When an Electronic reporting (ER) format is run, one or more outbound documents can be generated. **Folder** or **File** format components are used in ER formats to specify the structure of outbound documents. You can configure an email destination for these types of components to send outbound documents as email attachments.

You can configure an email destination for each **Folder** or **File** component of an ER format. In this case, **each outbound document is emailed individually**. Based on this destination setting, a generated document is delivered as an attachment of an email.

> [!NOTE]
> If a document isn't generated, because the **Enabled** expression for the relevant **File** component has been configured to return a **False** boolean value, an email isn't sent, even if an email destination is configured and enabled for this component.

You can also [group](#grouping) several **Folder** or **File** components together to configure an email destination for that group of components. In this case, all outbound documents that are generated by components that belong to that group **are sent as multiple attachments of a single email**. Based on this destination setting, each generated document is delivered as an attachment of a single email.

> [!NOTE]
> If at least one document is generated by a **File** component of a group of components, an email is sent. If no document is generated by grouped components, because the **Enabled** expression for each **File** component has been configured to return a **False** boolean value, an email isn't sent, even if an email destination is configured and enabled for that group of components.
>
> **Email** is the only destination that can be configured for a group of components. To deliver a document that is emailed based on the email destination setting for a group, add one more destination record, select the component that you want, and then configure another destination for this record.

Multiple groups of components can be configured for a single ER format configuration. In this way, you can configure an email destination for every group of components and an email destination for every component.

## Configure an email destination

To send an output file or several output files by email, in the grid on the **File destination** FastTab of the **Electronic reporting destination** page, select a component or group of components, and then select **Settings**. Then, in the **Destination settings** dialog box, on the **Email** tab, set the **Enabled** option to **Yes**. After you turn on the **Enabled** option, you can specify email recipients, and edit the subject and body of the email message. You can either set up constant text for the email subject and body, or use ER [formulas](er-formula-language.md) to dynamically create email texts.

You can configure email addresses for ER in two ways. The configuration can be completed in the same way that the Print Management feature completes it, or you can resolve an email address by using a direct reference to the ER configuration through a formula.

[![Turning on the Enabled option for an email destination](./media/ER_Destinations-EnableSingleDestination.png)](./media/ER_Destinations-EnableSingleDestination.png)

## Email address types

If you select **Edit** next to the **To** or **Cc** field in the **Destination settings** dialog box, the **Email to** dialog box appears. Select **Add**, and then select the type of email address to use. Currently, the **Configuration email** and **Print Management** email types are supported.

[![Selecting the type of email address](./media/ER_Destinations-EmailSelectAddressType.png)](./media/ER_Destinations-EmailSelectAddressType.png)

### Print Management

If you select the **Print Management** email type, you can enter fixed email addresses in the **Email to** dialog box:

- In the **Email source** field, select **None**.
- In the **Additional email addresses, separated by ";"** field, enter the fixed email addresses.

![Configuring a fixed email address](./media/er_destinations-emailfixedaddress.png)

You can also obtain email addresses from contact details of a party for which you generate an outbound document. To use email addresses that aren't fixed, you must select the [role](https://docs.microsoft.com/dynamics365/fin-ops-core/fin-ops/organization-administration/overview-global-address-book#party-roles) of such a party for a file destination. The following values are supported: **Customer**, **Vendor**, **Prospect**, **Contact**, **Competitor**, **Worker**, **Applicant**, **Prospective vendor**, and **Disallowed vendor**. For example, to configure email destination for an ER format that is used to process vendor payments, you need to select the **Vendor** role. After you select the desire role, use the **Bind** button next to the **Email source account** field to open the [Formula designer](general-electronic-reporting-formula-designer.md) page. You can use this page to configure a formula that returns from the processed document to the email destination, at runtime, the **account number** of a party playing the configured role.

>[!NOTE]
> Formulas are specific to the ER configuration.

In the **Formula** field, enter a document-specific reference to **Customer**, **Vendor**, or any other supported role. Instead of typing, you can find the data source node that represents an account of the configured role, and then select **Add data source** to update the formula. For example, if you configure email destination for the **ISO 20022 Credit Transfer** configuration that is used to process vendor payments, the node that represents a vendor account is `'$PaymentsForCoveringLetter'.Creditor.Identification.SourceID`.

![Selecting the Bind button to configure an email source account](./media/er_destinations-emaildefineaddresssource.gif)

If account numbers of the configured role are unique for the entire Finance instance, the **Company of email source** field can be kept blank. 

![Formula designer page](./media/er_destinations-emaildefineaddresssourceformula.png)

Alternatively, you might have a situation when different parties of the [Global address book](https://docs.microsoft.com/dynamics365/fin-ops-core/fin-ops/organization-administration/overview-global-address-book) have been registered in different companies ([legal entities](https://docs.microsoft.com/dynamics365/fin-ops-core/fin-ops/organization-administration/organizations-organizational-hierarchies?toc=/dynamics365/commerce/toc.json#legal-entities)) to play the configured role by using the same account number. So, in this case account numbers for the configured role are not unique for the entire Finance instance. Therefore, for explicit party selection it is not enough to specify the only an account number. In addition, you need to specify a company in scope of which this party has been registered to play a configured role. For doing this, you must use the **Bind** button next to the **Company of email source** field to open the [Formula designer](general-electronic-reporting-formula-designer.md) page. You can use this page to configure a formula that returns, at runtime, the code of a company in scope of which the desire source must be found.

> [!TIP]
> When you need to use the code of a company in scope of which you run an ER format and this ER format does not provide any data source to obtain such a company code, configure the `GetCurrentCompany()` formula by using the built-in [GETCURRENTCOMPANY](er-functions-other-getcurrentcompany.md) ER function.

>[!NOTE]
> Formulas are specific to the ER configuration.

In the **Assign email address** dialog box, you can specify what kind of email addresses must be used at runtime:

- In the **Purpose** field, select the desire purposes. When configured, only emails of these purposes from contacts of the discovered party will be used.
- Set the **Primary contact** field to **Yes** to use an email address that is configured for the discovered party as **Primary**.

>[!NOTE]
> If you configured purposes of email address and set the **Primary contact** field to **Yes** simultaneously, every email that satisfies at least one configured criterion will be used at runtime.

![Configuring an email source attributes account](./media/er_destinations-emaildefineaddresssourceattributes.png)

### Configuration email

Use the **Configuration email** email type if the configuration that you use has a node in the data sources that returns an **email address** or separated by ";" email addresses. You can use [data sources](general-electronic-reporting.md#FormatComponentOutbound) and [functions](er-formula-language.md#functions) in the formula designer to get a correctly formatted email address or separated by ";" email addresses. For example, if you use the **ISO 20022 Credit Transfer** configuration, the node that represents a primary email address of a vendor from vendor contact details to send out the covering letter is `'$PaymentsForCoveringLetter'.Creditor.ContactDetails.Email`.

[![Configuring an email address source](./media/ER_Destinations-EmailDefineAddressSource2.png)](./media/ER_Destinations-EmailDefineAddressSource2.png)

## <a id="grouping">Group format components</a>

To group format components, in the grid on the **File destination** FastTab of the **Electronic reporting destination** page, select the components that you want to group, and then select **Group**.

**Email** is the only previously configured destination that is still available for the selected components. No other previously configured destinations are available, because they are considered unsupported for a group of components. You will be notified about these changes as appropriate.

The record that you previously added is considered the header of the created group. This record holds the email destination settings for this group. Other records are group members that will use the email destination settings of the header record of this group.

To ungroup format components, in the grid on the **File destination** FastTab, select a record that belongs to a group, and then select **Ungroup**.

- If you select a header record, the whole group will be ungrouped.
- If you select a member record, and it's the last member record in a group, the whole group will be ungrouped.
- If you select a member record that isn't the last member record in a group, that record will be excluded from the current group.

The following illustration shows the structure of an ER format that was configured to produce a zipped outbound file that contains a collection letter note and appropriate customer invoices in PDF format.

[![Structure of an ER format that generates outbound documents](./media/ER_Destinations-Email-Grouping1.png)](./media/ER_Destinations-Email-Grouping1.png)

The following illustration shows the process, as described in this topic, of grouping individual components and enabling the **Email** destination for the new group, so that a collection letter note is sent together with appropriate customer invoices as email attachments.

[![Grouping invividual components and enabling the Email destination](./media/ER_Destinations-Email-Grouping2.gif)](./media/ER_Destinations-Email-Grouping2.gif)

## Additional resources

- [Electronic reporting (ER) overview](general-electronic-reporting.md)
- [Electronic reporting (ER) destinations](electronic-reporting-destinations.md)
- [Formula designer in Electronic reporting (ER)](general-electronic-reporting-formula-designer.md)
